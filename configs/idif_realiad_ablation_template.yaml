notes:
  description: >
    Template for Real-IAD ablations reported in Table 3. Current code path fully supports
    the IDIF default model. Additional ablation toggles (3DConv / no-CB / DKD ensemble)
    should be added by configuring model variants and/or separate training runs.

data:
  image_root: D:/UMVAD/realiad/realiad_256
  json_root: D:/UMVAD/realiad/realiad_jsons
  categories: null
  expected_views: [1, 2, 3, 4, 5]
  image_size: 256
  normalize: false
  drop_incomplete: true

loader:
  batch_size: 8
  num_workers: 4
  pin_memory: true

model:
  variant: idif  # metadata only; actual behavior controlled by use_cb/fusion_mode/num_views
  num_views: 5
  input_size: 256
  teacher_pretrained: true
  student_encoder_pretrained: false
  use_cb: true
  fusion_mode: ivc  # {ivc, 3dconv, none}
  cb_latent_channels: 64
  voxel_shape: [4, 8, 8]
  num_fusion_blocks: 2
  num_heads: 8
  attn_dropout: 0.0

trainer:
  device: cuda
  lr: 1.0e-4
  weight_decay: 1.0e-4
  epochs: 50
  grad_clip_norm: 5.0
  amp: true
  save_dir: runs/idif_realiad_ablation
  log_interval: 20
  view_dropout_prob: 0.0
  inputs_are_normalized: false
  distill_weight: 1.0
  ib_weight: 1.0
  ib_kl_weight: 1.0
  ib_recon_weight: 1.0
  scale_weights:
    layer1: 1.0
    layer2: 1.0
    layer3: 1.0
  dtd_root: null
  eval_every: 1
  seed: 42

targets:
  table3:
    dkd_ensemble_s_auroc: 94.0
    dkd_plus_3dconv_s_auroc: 95.8
    dkd_plus_ivc_s_auroc: 96.1
    dkd_plus_ivc_plus_cb_s_auroc: 97.0
